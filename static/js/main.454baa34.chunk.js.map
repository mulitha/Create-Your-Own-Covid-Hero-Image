{"version":3,"sources":["canvas-to-blob.js","GifGenerator.js","Steps.js","CreatorAddPhoto.js","CreatorScaleImage.js","CreatorFinishButton.js","CreatorDownload.js","CreatorFlow.js","App.js","index.js","img/overlay.png"],"names":["window","CanvasPrototype","HTMLCanvasElement","prototype","hasBlobConstructor","Blob","Boolean","e","hasArrayBufferViewSupport","Uint8Array","size","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","dataURIPattern","dataURLtoBlob","atob","ArrayBuffer","dataURI","matches","mediaType","isBase64","dataString","byteString","arrayBuffer","intArray","i","bb","match","Error","slice","length","decodeURIComponent","charCodeAt","type","append","getBlob","toBlob","mozGetAsFile","callback","quality","self","this","setTimeout","toDataURL","msToBlob","define","workerBlob","frames","process","preloadImages","Promise","resolve","reject","prefetchImages","then","imageArray","makeGif","baseImage","images","gif","GIF","workers","workerScript","URL","createObjectURL","width","height","x","tempCanvas","document","createElement","ctx","getContext","drawImage","addFrame","delay","on","blob","render","GifGenerator","mobile","a","Steps","step","useState","stepText","setStepText","p","setProgress","useEffect","className","style","CreatorAddPhoto","hasImage","setImg","next","file","useRef","added","setAdded","htmlFor","ref","name","id","accept","onChange","addPhoto","preventDefault","fileType","target","files","loadImage","img","orientation","canvas","maxWidth","maxHeight","alert","onClick","CreatorScaleImage","setScale","min","max","defaultValue","railStyle","backgroundColor","trackStyle","handleStyle","borderColor","marginTop","change","c","textEntered","back","CreatorDownload","downloadGif","downloadPoster","PROFANITIES","CreatorFlow","go","onClose","setStep","nurseName","setNurseName","setGif","poster","setPoster","loading","setLoading","useHistory","f","overlayImage","userImage","nurseInput","finalConfettiImage","initialScale","stepRef","targetRef","mouseDown","current","console","log","setActiveObject","enterEditing","hiddenTextarea","focus","text","set","fill","renderAll","s","test","editable","discardActiveObject","createImage","dataurl","arr","split","mime","bstr","n","u8arr","blobToDataURL","FileReader","onload","result","readAsDataURL","Image","createPoster","src","fabric","util","imgObj","scaleToWidth","hasBorders","hasControls","originX","originY","left","WIDTH","top","HEIGHT","add","Canvas","selection","defaultCursor","preserveObjectStacking","setWidth","setHeight","opt","delta","deltaY","zoom","scaleX","scaleY","stopPropagation","setupCanvas","fromURL","overlay","o","hasRotatingPoint","lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","selectable","evented","scaleToHeight","addImage","remove","y","filters","push","Grayscale","applyFilters","sendToBack","enableText","IText","fontFamily","textAlign","lineHeight","fontSize","cursorWidth","cursorColor","hoverCursor","selectionColor","caching","fixedLineWidth","multiline","cursorHeightPercent","cursorDeltaX","cursorDeltaY","maxLength","t","replace","substring","value","setSelectionStart","setSelectionEnd","bringToFront","disableBodyScroll","alt","Math","abs","FileSaver","saveAs","App","create","setHeader","setGo","useScrollPosition","prevPos","currPos","innerHeight","Array","Object","defineProperty","TypeError","O","len","start","arguments","relativeStart","k","end","relativeEnd","undefined","final","ReactDOM","getElementById","module","exports"],"mappings":"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","file":"static/js/main.454baa34.chunk.js","sourcesContent":["/*\n * JavaScript Canvas to Blob\n * https://github.com/blueimp/JavaScript-Canvas-to-Blob\n *\n * Copyright 2012, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on stackoverflow user Stoive's code snippet:\n * http://stackoverflow.com/q/4998908\n */\n\n/* global define, Uint8Array, ArrayBuffer, module */\n\n;(function (window) {\n    //'use strict'\n  \n    var CanvasPrototype =\n      window.HTMLCanvasElement && window.HTMLCanvasElement.prototype\n    var hasBlobConstructor =\n      window.Blob &&\n      (function () {\n        try {\n          return Boolean(new Blob())\n        } catch (e) {\n          return false\n        }\n      })()\n    var hasArrayBufferViewSupport =\n      hasBlobConstructor &&\n      window.Uint8Array &&\n      (function () {\n        try {\n          return new Blob([new Uint8Array(100)]).size === 100\n        } catch (e) {\n          return false\n        }\n      })()\n    var BlobBuilder =\n      window.BlobBuilder ||\n      window.WebKitBlobBuilder ||\n      window.MozBlobBuilder ||\n      window.MSBlobBuilder\n    var dataURIPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/\n    var dataURLtoBlob =\n      (hasBlobConstructor || BlobBuilder) &&\n      window.atob &&\n      window.ArrayBuffer &&\n      window.Uint8Array &&\n      function (dataURI) {\n        var matches,\n          mediaType,\n          isBase64,\n          dataString,\n          byteString,\n          arrayBuffer,\n          intArray,\n          i,\n          bb\n        // Parse the dataURI components as per RFC 2397\n        matches = dataURI.match(dataURIPattern)\n        if (!matches) {\n          throw new Error('invalid data URI')\n        }\n        // Default to text/plain;charset=US-ASCII\n        mediaType = matches[2]\n          ? matches[1]\n          : 'text/plain' + (matches[3] || ';charset=US-ASCII')\n        isBase64 = !!matches[4]\n        dataString = dataURI.slice(matches[0].length)\n        if (isBase64) {\n          // Convert base64 to raw binary data held in a string:\n          byteString = atob(dataString)\n        } else {\n          // Convert base64/URLEncoded data component to raw binary:\n          byteString = decodeURIComponent(dataString)\n        }\n        // Write the bytes of the string to an ArrayBuffer:\n        arrayBuffer = new ArrayBuffer(byteString.length)\n        intArray = new Uint8Array(arrayBuffer)\n        for (i = 0; i < byteString.length; i += 1) {\n          intArray[i] = byteString.charCodeAt(i)\n        }\n        // Write the ArrayBuffer (or ArrayBufferView) to a blob:\n        if (hasBlobConstructor) {\n          return new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], {\n            type: mediaType\n          })\n        }\n        bb = new BlobBuilder()\n        bb.append(arrayBuffer)\n        return bb.getBlob(mediaType)\n      }\n    if (window.HTMLCanvasElement && !CanvasPrototype.toBlob) {\n      if (CanvasPrototype.mozGetAsFile) {\n        CanvasPrototype.toBlob = function (callback, type, quality) {\n          var self = this\n          setTimeout(function () {\n            if (quality && CanvasPrototype.toDataURL && dataURLtoBlob) {\n              callback(dataURLtoBlob(self.toDataURL(type, quality)))\n            } else {\n              callback(self.mozGetAsFile('blob', type))\n            }\n          })\n        }\n      } else if (CanvasPrototype.toDataURL && dataURLtoBlob) {\n        if (CanvasPrototype.msToBlob) {\n          CanvasPrototype.toBlob = function (callback, type, quality) {\n            var self = this\n            setTimeout(function () {\n              if (\n                ((type && type !== 'image/png') || quality) &&\n                CanvasPrototype.toDataURL &&\n                dataURLtoBlob\n              ) {\n                callback(dataURLtoBlob(self.toDataURL(type, quality)))\n              } else {\n                callback(self.msToBlob(type))\n              }\n            })\n          }\n        } else {\n          CanvasPrototype.toBlob = function (callback, type, quality) {\n            var self = this\n            setTimeout(function () {\n              callback(dataURLtoBlob(self.toDataURL(type, quality)))\n            })\n          }\n        }\n      }\n    }\n    if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return dataURLtoBlob\n      })\n    } else if (typeof module === 'object' && module.exports) {\n      module.exports = dataURLtoBlob\n    } else {\n      window.dataURLtoBlob = dataURLtoBlob\n    }\n  })(window)","import prefetchImages from 'prefetch-image';\nimport * as GIF from 'gif.js';\n//import FileSaver from 'file-saver';\n\nconst workerStr = `// gif.worker.js 0.2.0 - https://github.com/jnordberg/gif.js\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require(\"./TypedNeuQuant.js\");var LZWEncoder=require(\"./LZWEncoder.js\");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv=\"\";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither=\"FloydSteinberg\";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes(\"GIF89a\")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace(\"-serpentine\",\"\"),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw\"Unknown dithering kernel: \"+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes(\"NETSCAPE2.0\");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{\"./LZWEncoder.js\":2,\"./TypedNeuQuant.js\":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require(\"./GIFEncoder.js\");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{\"./GIFEncoder.js\":1}]},{},[4]);\n//# sourceMappingURL=gif.worker.js.map`;\n\nvar workerBlob = new Blob([workerStr], {\n    type: 'application/javascript'\n});\n\nconst DELAY = 200;\nconst frames = [\n    process.env.PUBLIC_URL + '/frames/1.png',\n    process.env.PUBLIC_URL + '/frames/2.png',\n    process.env.PUBLIC_URL + '/frames/3.png',\n    process.env.PUBLIC_URL + '/frames/4.png',\n];\n\n\nconst preloadImages = () => {\n    return new Promise((resolve, reject) => {\n        prefetchImages(frames)\n            .then((imageArray) => {\n                //result is an array containing all the \"Image\" objects\n                //console.log('all images loaded!');\n                //start init your page logic...\n                resolve(imageArray);\n            });\n    });\n};\n\nconst makeGif = (baseImage, images) => {\n    return new Promise((resolve, reject) => {\n        const gif = new GIF({\n            workers: 2,\n            workerScript: URL.createObjectURL(workerBlob), //process.env.PUBLIC_URL + 'gif.worker.js',\n            quality: 90,\n            width: 1024,\n            height: 1024\n        });\n\n        for(let x = 0 ; x < images.length; x++) {\n            const tempCanvas = document.createElement('CANVAS');\n            const ctx = tempCanvas.getContext('2d');\n        \n            tempCanvas.width = 1024;\n            tempCanvas.height = 1024;\n\n            ctx.drawImage(baseImage, 0, 0, 1024, 1024); \n            ctx.drawImage(images[x], 0, 0); \n            \n            gif.addFrame(tempCanvas, { delay: DELAY});\n        }\n\n\n        gif.on('finished', function(blob) {\n            //console.log('FINISHED');\n            resolve(blob);\n            return;\n            /*\n            //window.open(URL.createObjectURL(blob), \"_blank\");\n            console.log(\"finished generating gif\");\n            //resolve(URL.createObjectURL(blob));\n\n            if(mobile) {\n                window.open(URL.createObjectURL(blob), \"_blank\");\n            } else {\n                //canvas.current.toBlob((blob) => {\n                FileSaver.saveAs(blob, \"montefiore.gif\");\n                //});\n            } \n\n            resolve(true);*/\n        });\n\n        gif.render();\n    });\n};\n\nexport default function GifGenerator(baseImage, mobile) {\n    return new Promise(async (resolve, reject) => {\n        const images = await preloadImages();\n        const gif = await makeGif(baseImage, images);\n        resolve(gif);  \n    });\n}","import React, {useState, useEffect} from 'react';\n\nexport default function Steps({step = 0}) {\n    const [stepText, setStepText] = useState('');\n    const [p, setProgress] = useState(0);\n    useEffect(()=> {\n        switch(step) {\n            default:\n            case 0:\n                setStepText('');\n                break;\n            case 1:\n                setStepText('Choose your photo');\n                setProgress(25);\n                break;\n            case 2:\n                setStepText('Adjust your image to fit');\n                setProgress(50);\n                break;\n            case 3:\n                setStepText('Add a name to your image');\n                setProgress(75);\n                break;\n            case 4:\n                setStepText('Download your hero image');\n                setProgress(100);\n                break;\n        }\n    }, [step]);\n\n    return (\n        <div className={\"steps step-count\"+step}>\n            <div>\n                <div className=\"p-big\">\n                    <div className=\"step-blue\">Step {step}</div>\n                    {stepText}\n                </div>\n                <div className=\"progress\">\n                    <span>{step} of 4</span>\n                    <div className=\"progress-bar\"><div className=\"progress-bar-inner\" style={{width: p + '%'}}></div></div>\n                </div>\n            </div>\n        </div>\n    );\n}","import React, {useRef, useState} from 'react';\nimport * as loadImage from 'blueimp-load-image';\n\nexport default function CreatorAddPhoto({hasImage = false, setImg = null, next= null, width = 2048, height = 2048}) {\n    const file = useRef();\n    const [added, setAdded] = useState(false);\n\n    const addPhoto = (e) => {\n        e.preventDefault();\n\n        const fileType = e.target.files[0].type;\n\n        if(fileType === \"image/png\" || fileType === \"image/gif\" || fileType === \"image/jpeg\" || fileType === \"image/jpg\") {\n            loadImage(e.target.files[0], img => {\n                setImg(img.toDataURL());\n                setAdded(true);\n            },\n            {\n                orientation: true,\n                canvas: true,\n                maxWidth: width,\n                maxHeight: height\n            });\n        } else {\n            alert(\"Please choose an image file.\");\n        }\n    };\n\n    return (\n        <div className=\"step-bottom-overlay\">\n            <div>\n                <label htmlFor=\"fileupload\" className=\"label-btn btn btn-add\"><span className=\"text\">Add Photo</span></label>\n                <input type=\"file\" ref={file} name=\"fileupload\" id=\"fileupload\" className=\"inputfile\" accept=\"image/*\" onChange={addPhoto} />\n            </div>\n            <div>\n                <button className={added || hasImage ? \"button btn\" : \"button btn button-disabled\"} onClick={() => {\n                    if(added || hasImage) { \n                        next();\n                    }\n                }}>Next</button>\n            </div>\n        </div>\n    );\n}","import React from 'react';\nimport Slider from 'rc-slider';\n\nexport default function CreatorScaleImage({setScale = null}) {\n    const change = (c) => {\n        setScale(c);\n    };\n\n    return (\n\n        <div className=\"canvas-scale\">\n            <span>Scale</span>\n            <Slider \n                min={-1} \n                max={1} \n                step={0.01} \n                defaultValue={0} \n                railStyle={{ backgroundColor: '#fff', height: 10}}\n                trackStyle={{ backgroundColor: '#f12535', height:10}}\n                handleStyle={{\n                    borderColor: '#f12535',\n                    backgroundColor: '#f12535',\n                    height: 28,\n                    width: 28,\n                    marginTop: -9,\n                }}\n                onChange={change}\n                />\n\n                \n        </div>\n    );\n}","import React from 'react';\n\nexport default function CreatorAddPhoto({textEntered, next = null, back = null}) {\n    return (\n        <div className=\"step-bottom-overlay\">\n            <div>\n                <button className=\"button btn\" onClick={back}>Back</button>\n            </div>\n            <div>\n                <button className=\"button btn\" onClick={next}>{textEntered ? <>Finish</> : <>Skip</>}</button>\n            </div>\n        </div>\n    );\n}","import React from 'react';\n\nexport default function CreatorDownload({mobile, downloadGif, downloadPoster }) {\n    return (\n        mobile ? (\n            <div className=\"step-bottom-overlay step-bottom-overlay-full\">\n                <div>\n                    <div className=\"mobile\">Press and hold the image above to add to your photos</div>\n                </div>\n            </div>\n        ) : (\n            <div className=\"step-bottom-overlay\">\n                <div>\n                    <button className=\"button btn btn-white\" onClick={downloadPoster}>Download Your Hero Image</button> \n                </div>\n                <div>\n                    <button className=\"button btn btn-white\" onClick={downloadGif}>Download Your Hero Gif</button> \n                </div>\n            </div>\n        )\n    )\n}","import React, { useState, useRef, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom'\nimport { fabric } from 'fabric';\nimport FileSaver from 'file-saver';\nimport GifGenerator from './GifGenerator';\n\nimport { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock';\n\nimport './canvas-to-blob.js';\n\nimport Steps from './Steps';\nimport CreatorAddPhoto from './CreatorAddPhoto';\nimport CreatorScaleImage from './CreatorScaleImage';\nimport CreatorFinishButton from './CreatorFinishButton';\nimport CreatorDownload from './CreatorDownload';\n\nimport overlay from './img/overlay.png';\n\nimport './css/App.scss';\n\nconst PROFANITIES = /shit|cunt|fuck|fcking|nigger|nigga|asshole|cocksucker|blowjob|clit|gangbang|wetback|faggot/i;\n\nexport default function CreatorFlow({ mobile, go = null, onClose = null }) {\n    const defaultNurseText = `Enter Name`;\n    const [step, setStep] = useState(0);\n    const [img, setImg] = useState(null);\n    const [nurseName, setNurseName] = useState(null);\n    const [gif, setGif] = useState(null);\n    const [poster, setPoster] = useState(null);\n    const [loading, setLoading] = useState(false);\n    let history = useHistory();\n\n    const canvas = useRef(null);\n    const f = useRef(null);\n    const overlayImage = useRef();\n    const userImage = useRef();\n    const nurseInput = useRef();\n    //const stickerImage = useRef();\n    const finalConfettiImage = useRef();\n    const initialScale = useRef();\n\n    const stepRef = useRef(step);\n    const targetRef = useRef();\n\n    const HEIGHT = 1024;//mobile ? window.innerWidth : 600;\n    const WIDTH = 1024; //mobile ? window.innerWidth : 600;\n\n    const setupCanvas = () => {\n        fabric.Image.fromURL(overlay, o => {\n            o.set({\n                id: 'overlay',\n                hasBorders: false,\n                hasControls: false,\n                hasRotatingPoint: false,\n                lockMovementX: true,\n                lockMovementY: true,\n                lockRotation: true,\n                lockScalingX: true,\n                lockScalingY: true,\n                selectable: false,\n                defaultCursor: 'pointer',\n                evented: false\n            });\n            o.scaleToHeight(WIDTH);\n            o.scaleToWidth(WIDTH);\n            overlayImage.current = o;\n\n            f.current.add(overlayImage.current);\n        });\n\n        f.current.on('mouse:down', mouseDown);\n    };\n\n    const addImage = (i) => {\n        setStep(2);\n        if (userImage.current) {\n            f.current.remove(userImage.current);\n            f.current.renderAll();\n            userImage.current = null;\n        }\n\n        fabric.util.loadImage(i, (imgObj) => {\n            userImage.current = new fabric.Image(imgObj);\n\n            userImage.current.scaleToWidth(WIDTH);\n            userImage.current.set({\n                id: 'userImage',\n                hasBorders: false,\n                hasControls: false,\n                originX: 'center',\n                originY: 'center',\n                left: WIDTH * 0.5,\n                top: HEIGHT * 0.5\n            });\n\n            if (imgObj.width > imgObj.height) {\n                userImage.current.scaleToHeight(WIDTH);\n            } else {\n                userImage.current.scaleToWidth(WIDTH);\n            }\n\n\n\n            initialScale.current = {\n                x: userImage.current.scaleX,\n                y: userImage.current.scaleY\n            };\n\n            userImage.current.filters.push(new fabric.Image.filters.Grayscale());\n            userImage.current.applyFilters();\n\n            f.current.add(userImage.current);\n            f.current.sendToBack(userImage.current);\n            f.current.renderAll();\n        });\n    };\n\n    const setScale = (s) => {\n        //console.log(initialScale.current.x, s, Math.abs(initialScale.current.x * (1 + s)));\n        userImage.current.set({\n            scaleX: Math.abs(initialScale.current.x * (1 + s)),\n            scaleY: Math.abs(initialScale.current.y * (1 + s))\n        });\n\n        f.current.renderAll();\n    }\n\n    const mouseDown = (e) => {\n        // console.log('mouse:down', stepRef.current);\n        if (stepRef.current === 3 && nurseInput.current) {\n            console.log('do it');\n            f.current.setActiveObject(nurseInput.current);\n            nurseInput.current.enterEditing()\n            nurseInput.current.hiddenTextarea.focus();\n            if (nurseInput.current.text === defaultNurseText) {\n                nurseInput.current.set({ text: '' });\n                nurseInput.current.set({ fill: '#fff' })\n                f.current.renderAll();\n            }\n        }\n    }\n\n    const enableText = () => {\n        //console.log('enable text');\n\n        nurseInput.current = new fabric.IText(defaultNurseText, {\n            fontFamily: 'Leitura',\n            fill: '#666',\n            left: WIDTH * 0.5,\n            top: 70,\n            originX: 'center',\n            textAlign: 'center',\n            lineHeight: 1,\n            fontSize: 70,\n            cursorWidth: 8,\n            cursorColor: '#FFF',\n            hoverCursor: 'text',\n            hasBorders: false,\n            hasControls: false,\n            hasRotatingPoint: false,\n            lockMovementX: true,\n            lockMovementY: true,\n            lockRotation: true,\n            lockScalingX: true,\n            lockScalingY: true,\n            selectionColor: 'rgba(255,255,255,0.9)',\n            caching: false,\n            fixedLineWidth: WIDTH,\n            multiline: false,\n            cursorHeightPercent: 0.7,\n            cursorDeltaX: 0,\n            cursorDeltaY: -12,\n            maxLength: 30\n        });\n\n        f.current.add(nurseInput.current);\n        f.current.renderAll();\n\n\n        nurseInput.current.on('changed', (e) => {\n            let t = nurseInput.current.text;\n            t = t.replace(defaultNurseText, '');\n            if (nurseInput.current.text.length >= 15) {\n                t = t.substring(0, 16);\n            }\n\n            nurseInput.current.text = t;\n            nurseInput.current.hiddenTextarea.value = t;\n\n            if (nurseInput.current.text !== defaultNurseText) {\n                nurseInput.current.set({ fill: '#fff' })\n                setNurseName(nurseInput.current.text);\n            } else {\n                nurseInput.current.set({ fill: '#ACCFE1' });\n                setNurseName(null);\n            }\n\n            nurseInput.current.setSelectionStart(nurseInput.current.text.length);\n            nurseInput.current.setSelectionEnd(nurseInput.current.text.length);\n\n            f.current.bringToFront(nurseInput.current);\n            f.current.renderAll();\n        });\n    };\n\n\n\n    const next = async () => {\n        const s = step + 1;\n        setStep(s);\n        stepRef.current = s;\n\n        if (s === 4) {\n            //add confetti to final image\n            setLoading(true);\n\n            // remove if nothing or a profanity\n            if (nurseInput.current.text === defaultNurseText || PROFANITIES.test(nurseInput.current.text)) {\n                nurseInput.current.set({ text: '' });\n                f.current.renderAll();\n            }\n            nurseInput.current.editable = false;\n            f.current.discardActiveObject().renderAll();\n\n            createImage();\n\n        }\n    };\n\n    const back = () => {\n        const s = step - 1;\n        setStep(s);\n        stepRef.current = s;\n\n        if (s === 2) {\n            f.current.remove(nurseInput.current);\n            userImage.current.lockMovementX = false;\n            userImage.current.lockMovementY = false;\n        }\n    };\n\n    const dataURLtoBlob = (dataurl) => {\n        var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n            bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n        while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n        }\n        return new Blob([u8arr], { type: mime });\n    }\n\n    const downloadPoster = () => {\n        var blob = dataURLtoBlob(poster);\n        FileSaver.saveAs(blob, \"CovidHero.jpg\");\n    };\n\n    const downloadGif = () => {\n        var blob = dataURLtoBlob(gif);\n        FileSaver.saveAs(blob, \"CovidHero.gif\");\n    };\n\n\n    function blobToDataURL(blob, callback) {\n        var a = new FileReader();\n        a.onload = function (e) { callback(e.target.result); }\n        a.readAsDataURL(blob);\n    }\n\n\n    const createImage = async () => {\n        const img = new Image();\n        img.onload = async () => {\n            const blob = await GifGenerator(img, mobile);\n\n            blobToDataURL(blob, async (dataurl) => {\n                setGif(dataurl);\n                if (!mobile) {\n                    await createPoster();\n                }\n                setLoading(false);\n            });\n        }\n\n        img.src = canvas.current.toDataURL();\n    };\n\n    const createPoster = async () => {\n        return new Promise((resolve, reject) => {\n            fabric.util.loadImage(process.env.PUBLIC_URL + '/frames/1.png', (imgObj) => {\n                finalConfettiImage.current = new fabric.Image(imgObj);\n\n                finalConfettiImage.current.scaleToWidth(WIDTH);\n                finalConfettiImage.current.set({\n                    id: 'confettiImg',\n                    hasBorders: false,\n                    hasControls: false,\n                    originX: 'center',\n                    originY: 'center',\n                    left: WIDTH * 0.5,\n                    top: HEIGHT * 0.5\n                })\n\n                f.current.add(finalConfettiImage.current);\n                f.current.renderAll();\n\n                setPoster(canvas.current.toDataURL());\n\n                resolve();\n            });\n        });\n    };\n\n    //effects\n\n    useEffect(() => {\n        if (f.current === null) {\n\n            //console.log('init');\n            f.current = new fabric.Canvas(canvas.current, {\n                backgroundColor: '#04193A',\n                height: HEIGHT,\n                width: WIDTH,\n                selection: false,\n                defaultCursor: 'default',\n                preserveObjectStacking: true\n            });\n\n            f.current.setWidth(WIDTH);\n            f.current.setHeight(HEIGHT);\n\n            f.current.on('mouse:wheel', function (opt) {\n                if (userImage.current) {\n                    var delta = opt.e.deltaY;\n                    let zoom = userImage.current.scaleX;\n                    zoom = zoom + delta / 200;\n                    if (zoom > 5) zoom = 5;\n                    if (zoom < 0.01) zoom = 0.01;\n\n                    userImage.current.set({\n                        scaleX: zoom,\n                        scaleY: zoom\n                    });\n\n                    f.current.renderAll();\n                }\n\n                opt.e.preventDefault();\n                opt.e.stopPropagation();\n            });\n\n            setupCanvas();\n\n        }\n\n    }, []);\n\n    const resetAll = () => {\n        setGif(null);\n        setLoading(false);\n\n        if (userImage.current) {\n            f.current.remove(userImage.current);\n            userImage.current = null;\n        }\n\n        if (nurseInput.current) {\n            f.current.remove(nurseInput.current);\n            nurseInput.current = null;\n        }\n\n        if (finalConfettiImage.current) {\n            f.current.remove(finalConfettiImage.current);\n            finalConfettiImage.current = null;\n        }\n\n\n    };\n\n    const close = () => {\n        enableBodyScroll(targetRef.current);\n        setStep(0);\n        resetAll();\n        history.push('/');\n    };\n\n    useEffect(() => {\n        if (img) {\n            addImage(img);\n        }\n    }, [img]);\n\n    useEffect(() => {\n        if (step === 3) {\n            //console.log('step: ' + step);\n            enableText();\n            userImage.current.lockMovementX = true;\n            userImage.current.lockMovementY = true;\n        }\n\n    }, [step])\n\n    useEffect(() => {\n        if (go) {\n            disableBodyScroll(targetRef.current);\n            setStep(1);\n        }\n    }, [go]);\n\n    return (\n        <>\n            <div id=\"create\" ref={targetRef} className={\"creator step\" + step}>\n\n                <Steps step={step} />\n\n                <div className=\"ui\">\n\n                    <div className=\"canvas\">\n                        <canvas ref={canvas} />\n                        {loading ? <div className=\"loader-holder\"><div className=\"loader\"></div></div> : null}\n                        {step === 4 && gif ? <img src={gif} alt=\"Final Sharable\" className=\"confetti\" /> : null}\n\n                        {/*step === 4 && gif ? <img src={poster} alt=\"Final Sharable\" className=\"confetti\" /> : null*/}\n\n                        {step === 4 && gif ? <div className=\"border\"></div> : null}\n\n                        {step === 2 ? <CreatorScaleImage setScale={setScale} /> : null}\n                    </div>\n                    {step === 1 || step === 2 ? <CreatorAddPhoto setImg={setImg} hasImage={img ? true : false} next={next} /> : null}\n                    {step === 3 ? <CreatorFinishButton setImg={setImg} textEntered={nurseName} back={back} next={next} /> : null}\n                    {step === 4 ? <CreatorDownload mobile={mobile} downloadPoster={downloadPoster} downloadGif={downloadGif} /> : null}\n                </div>\n\n\n\n            </div>\n        </>\n    );\n}","import React, { useState } from 'react';\nimport mobile from 'is-mobile';\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position'\nimport CreatorFlow from './CreatorFlow';\n\nimport './css/App.scss';\n\nfunction App({ create }) {\n  const [headerOn, setHeader] = useState(false);\n  const [go, setGo] = useState(create);\n\n  useScrollPosition(({ prevPos, currPos }) => {\n    if (currPos.y * -1 > window.innerHeight * 0.8) {\n      setHeader(true);\n    } else {\n      setHeader(false);\n    }\n  });\n\n  return (\n    <div className=\"App\">\n      <CreatorFlow mobile={mobile()} go={() => setGo(true)} /> \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'promise-polyfill/src/polyfill';\n\nimport 'core-js/es7/object';\nimport 'core-js/fn/string/includes';\nimport 'core-js/es7/array';\n\nimport Router from './Router';\nimport './css/index.css';\nimport \"./css/slick.css\";\nimport \"./css/slick-theme.css\";\nimport './css/modal-video.scss';\nimport App from './App';\n\n\nif (!Array.prototype.fill) {\n  Object.defineProperty(Array.prototype, 'fill', {\n    value: function(value) {\n\n      // Steps 1-2.\n      if (this == null) {\n        throw new TypeError('this is null or not defined');\n      }\n\n      var O = Object(this);\n\n      // Steps 3-5.\n      var len = O.length >>> 0;\n\n      // Steps 6-7.\n      var start = arguments[1];\n      var relativeStart = start >> 0;\n\n      // Step 8.\n      var k = relativeStart < 0 ?\n        Math.max(len + relativeStart, 0) :\n        Math.min(relativeStart, len);\n\n      // Steps 9-10.\n      var end = arguments[2];\n      var relativeEnd = end === undefined ?\n        len : end >> 0;\n\n      // Step 11.\n      var final = relativeEnd < 0 ?\n        Math.max(len + relativeEnd, 0) :\n        Math.min(relativeEnd, len);\n\n      // Step 12.\n      while (k < final) {\n        O[k] = value;\n        k++;\n      }\n\n      // Step 13.\n      return O;\n    }\n  });\n}\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n","module.exports = __webpack_public_path__ + \"static/media/overlay.fbca61ac.png\";"],"sourceRoot":""}